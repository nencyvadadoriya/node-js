
<%- include('../header') %>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<% if (success && success.length > 0) { %>
	<script>
		Swal.fire({
			icon: 'success',
			title: 'Success',
			text: '<%= success %>',
			confirmButtonColor: '#28a745'
		});
	</script>
	<% } %>
	
	<% if (error && error.length > 0) { %>
	<script>
		Swal.fire({
			icon: 'error',
			title: 'Error',
			text: '<%= error %>',
			confirmButtonColor: '#dc3545'
		});
	</script>
	<% } %>

<div class="container" style="margin-top: 5%; height: 510px;">
    <div class="page-inner">
        <div class="row">
            <div class="col-md-12">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">View Admin</div>
                    </div>
                    <div class="card-body" style="overflow-x: auto;"> 
                        <% if(currentAdmin.email == "vadadoriyanency8@gmail.com"){  %>
                            <% if (records.length === 0) { %>
                                <h4 class="text-center text-danger">No admins added yet.</h4>
                            <% } else { %>
                            <table class="table mt-3">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>First Name</th>
                                        <th>Last Name</th>
                                        <th>Email</th>
                                        <th>Password</th>
                                        <th>Gender</th>
                                        <th>City</th>
                                        <th>Image</th>
                                        <th colspan="2">Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <% records.map((data, index) => { %>
                                    <tr>
                                        <td><%= index + 1 %></td>
                                        <td><%= data.fname %></td>
                                        <td><%= data.lname %></td>
                                        <td><%= data.email %></td>
                                        <td><%= data.password %></td>
                                        <td><%= data.gender %></td>
                                        <td><%= data.city %></td>
                                        <td><img src="../<%= data.image %>" height="80px"></td>
                                        <td><a href="/updateAdmin?id=<%= data._id %>" class="btn btn-success">Update</a></td>
                                        <td><a href="/delete-addmin/<%= data.id %>" class="btn btn-danger">Delete</a></td>
                                    </tr>
                                    <% }) %>
                                </tbody>
                            </table>
                            <% } %>
                        <% } else { %>
                            <% if (records.length === 0) { %>
                                <h4 class="text-center text-danger">No admins added yet.</h4>
                            <% } else { %>
                            <table class="table mt-3">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>First Name</th>
                                        <th>Last Name</th>
                                        <th>Email</th>
                                        <th>Password</th>
                                        <th>Gender</th>
                                        <th>City</th>
                                        <th>Image</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <% records.map((data, index) => { %>
                                    <tr>
                                        <td><%= index + 1 %></td>
                                        <td><%= data.fname %></td>
                                        <td><%= data.lname %></td>
                                        <td><%= data.email %></td>
                                        <td><%= data.password %></td>
                                        <td><%= data.gender %></td>
                                        <td><%= data.city %></td>
                                        <td><img src="../<%= data.image %>" height="80px"></td>
                                    </tr>
                                    <% }) %>
                                </tbody>
                            </table>
                            <% } %>
                        <% } %>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<%- include('../footer') %>
